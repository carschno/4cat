	<article class="result" id="explorer-controls" data-dataset-key="{{ dataset.key }}">
	<h2>
		{{ dataset.get_label() }}
	</h2>
	<div class="fullwidth-notice">
		<a href="/results/{{ key }}"><i class="fas fa-arrow-left"></i> Return to dataset overview</a>
	</div>
	{% if custom_fields and custom_fields[0] == "invalid" %}
	<div class="fullwidth-notice">
		Invalid custom fields JSON - can't show posts properly ({{ custom_fields[1] }}).
	</div>
	{% endif %}
	{% if key %}
	<div id="dataset-info">
		{% if post_count > max_posts %}
			<p><strong>Large dataset - only showing the first {{ max_posts }} posts. Use filter processors to limit the dataset.</strong></p>
			{% set post_count = max_posts %}
		{% endif %}
	</div>
	{% endif %}

	{# some different info for views generated by a direct API call #}
	{% if not key and has_database %}
		<p>Showing {{ post_count }} posts from {{ datasource }}.</p>
	{% else %}
		<p>Showing posts {{ offset + 1 }} - {{ post_count if (offset + posts_per_page) > post_count else (offset + posts_per_page) }} ({{ post_count }} in total).</p>
	{% endif %}


<div id="sort-options">
    <p>Sort posts by:
        <select id="sort-select" name="sort-select">
            <option class="sort-option" value="dataset-order">Dataset order</option>
            {% if not custom_fields %}
	            {% for column in dataset.get_columns() %}
	            	<option class="sort-option" value="{{ column }}">{{ column }}</option>
	            {% endfor %}
            {% else %}
            	{% for sort_option in sort_options %}
                	<option class="sort-option" value="{{ sort_option.value() }}" {% if "descending" in sort_option %}data-desc={{ sort_option.descending }}{% endif %} {% if "force_int" in sort_option %}data-force-int={{ sort_option.force_int }}{% endif %}>{{ sort_option.key() }}</option>
            	{% endfor %}
            {% endif %}
        </select>
    </p>
</div>

</article>
